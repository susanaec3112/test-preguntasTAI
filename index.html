<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test desde Google Sheets</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    .question { margin-bottom: 2rem; }
    button { padding: 0.5rem; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Test interactivo</h1>
  <div id="quiz"></div>

  <script>
    const sheetID = "2PACX-1vRHwTizDHd7rL9t48XueczGpXQgvhk61VvGY3XVGkTxpRp54ErPLQO6nDPptbAej_qB7AFq6bqSI6Ss";
    const sheetName = "Hoja 1"; // Asegúrate de que tu hoja tenga este nombre
    const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;

    fetch(url)
      .then(res => res.text())
      .then(data => {
        const json = JSON.parse(data.substr(47).slice(0, -2));
        const rows = json.table.rows;
        const quizDiv = document.getElementById("quiz");

        rows.forEach((row, index) => {
          const [pregunta, a, b, c, correcta] = row.c.map(c => c?.v || "");
          const div = document.createElement("div");
          div.className = "question";
          div.innerHTML = `
            <p><strong>${index + 1}. ${pregunta}</strong></p>
            <label><input type="radio" name="q${index}" value="A"> A) ${a}</label><br>
            <label><input type="radio" name="q${index}" value="B"> B) ${b}</label><br>
            <label><input type="radio" name="q${index}" value="C"> C) ${c}</label><br>
            <button onclick="verificar('${correcta}', 'q${index}', this)">Comprobar</button>
            <p class="resultado"></p>
          `;
          quizDiv.appendChild(div);
        });
      });

    function verificar(respuesta, name, btn) {
      const seleccion = document.querySelector(`input[name="${name}"]:checked`);
      const resultado = btn.nextElementSibling;
      if (!seleccion) {
        resultado.textContent = "❗ Selecciona una opción";
        return;
      }
      resultado.textContent = seleccion.value === respuesta ? "✅ Correcto" : "❌ Incorrecto";
    }
  </script>
</body>
</html>